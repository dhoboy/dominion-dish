{"version":3,"sources":["dominion_dish/frontend/components/app.cljs"],"mappings":";AAaA,kDAAA,lDAAMA;AAAN,AAEE,iFAAA,jFAACC,oBACAC,gKAEA,WAAKC,EAAEA,MAAEC,UAAUC;AAAnB,AACE,GAAM,GAAA,cAAA,bAAOD;AAAb,AACE,uBAAA,mFAAA,2IAAA,2CAAA,hSAACE,2VAAiDF;;AADpD;;AAEA,GAAM,GAAA,cAAA,bAAOC;AAAb,AACE,8BAAA,mFAAA,yIAAA,2CAAA,9RAACC,yVAA+CD;;AADlD;;;;AAIH,0EAAA,1EAACJ,oBACAM,0KAEA,WAAKJ,EAAEA,MAAEA,MAAEE;AAAX,AACE,GAAM,GAAA,cAAA,bAAOA;AAAb,AACE,AAACG,6CAAsBH;;AACvB,OAACI;;AAFH;;;;AAKH,mBAAA,AAAAC,fAAMC,+BAAc,sDAAA,mFAAA,zIAACC;eAArB,AAAAF,XACMG,2BAAU,sDAAA,mFAAA,zIAACD;gBADjB,AAAAF,ZAEMI,4BAAW,sDAAA,mFAAA,zIAACF;AAFlB,AAAA,0FAAA,6DAAA,mIAAA,2CAAA,sFAAA,0IAAA,mFAAA,9YAIIG,wJAAyBF,4GACzBG,sMAEC,AAACC,oDAAkBH,WACnB,AAACI,mEAAcP","names":["dominion-dish.frontend.components.app/container","cljs.core/add-watch","dominion-dish.frontend.components.post/post-list-get-more-el","_","old-state","new-state","re-frame.core/dispatch","dominion-dish.frontend.components.post/post-detail-el","dominion-dish.frontend.utils/scroll-page-top","dominion-dish.frontend.utils/scroll-body-top","cljs.core/deref","active-panel","re_frame.core.subscribe","icon-key","post-type","dominion-dish.frontend.components.header/header","dominion-dish.frontend.components.generic/err-boundary","dominion-dish.frontend.components.nav/nav-container","dominion-dish.frontend.routes/panels"],"sourcesContent":["(ns dominion-dish.frontend.components.app\n  (:require [re-frame.core :refer [subscribe dispatch]]\n            [dominion-dish.frontend.routes :as routes]\n            [dominion-dish.frontend.subs :as subs]\n            [dominion-dish.frontend.events :as events]\n            [dominion-dish.frontend.components.header :as header]\n            [dominion-dish.frontend.components.nav :as nav]\n            [dominion-dish.frontend.components.post :as post]\n            [dominion-dish.frontend.components.generic :as generic]\n            [dominion-dish.frontend.utils :as utils]))\n\n\n;; Main Parent Component for App\n(defn container []\n  ;; post list infinite scroll atom watcher\n  (add-watch\n   post/post-list-get-more-el \n   :post-list-load-more-watcher\n   (fn [_ _ old-state new-state]\n     (when (some? old-state)\n       (dispatch [::events/unobserve-post-list {:element old-state}]))\n     (when (some? new-state)\n       (dispatch [::events/observe-post-list {:element new-state}]))))\n  \n  ;; post detail scroll to top of page on load watcher\n  (add-watch\n   post/post-detail-el\n   :post-detail-load-scroll-top-watcher\n   (fn [_ _ _ new-state]\n     (when (some? new-state)\n       (utils/scroll-page-top new-state)\n       (utils/scroll-body-top))))\n  \n  ;; app \n  (let [active-panel @(subscribe [::subs/active-panel])\n        icon-key @(subscribe [::subs/icon-key])\n        post-type @(subscribe [::subs/post-type])]\n    [:div.page\n     [header/header {:icon-key icon-key}]\n     [generic/err-boundary\n      [:div.body\n       (nav/nav-container post-type)\n       (routes/panels active-panel)]]]))\n"]}